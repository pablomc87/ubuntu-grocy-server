#cloud-config
hostname: ${hostname}
manage_etc_hosts: true
packages:
- avahi-daemon
apt:
  conf: |
    Acquire {
      Check-Date "false";
    };

users:
- name: ${pi_user}
  groups: users,adm,netdev,sudo,docker
  shell: /bin/bash
  lock_passwd: true
  passwd: $6$rounds=4096$salt$hash
  ssh_authorized_keys:
    - ${ssh_key}
  sudo: ALL=(ALL) NOPASSWD:ALL

timezone: UTC
runcmd:
- localectl set-x11-keymap "us" pc105
- setupcon -k --force || true

ansible:
  package_name: ansible-core
  install_method: distro
  pull:
    url: "${repo_url}"
    playbook_name: main.yml
    inventory: inventory.yml
    directory: /opt/ansible-pull
